# suppress inspection "UnusedProperty" for whole file

path_ancestors = class.ancestors

select_query = top_items->select((name = "this"))
select_query_nested = top_items->select((name = "this"))->select((qty > 10))
select_query_nested_nested = top_items->select((name = "this"))->select((qty > 10))->select((number <= 10))

select_invocation_nested = top_items->select((name = "this"))->select((qty > 10))
select_invocation_nested_nested = top_items->select((name = "this"))->select((qty > 10))->select((number <= 10))
select_invocation_intermediate = top_orders->select(items->exists((qty > 10)))->select((total > 100))

reject_query = top_items->reject((name = "this"))

yield_query = top_orders->collect(items)->flatten()
yield_query_unique = top_orders->collect(items.product)->flatten()->asSet()

recurse_ancestors = class->closure(ancestors)->flatten()
recurse_unique = class->closure(ancestors)->flatten()->asSet()
recurse_children = children->closure(children)->flatten()->select((ranking > 10))
recurse_self = self->closure(children)->flatten()->select((ranking > 10))

reduce_query = (top_orders -> iterate(self; s = 0 | (s + total)))

enumeration = top_orders->select(order | order.total > 100)
enumeration_yield = top_orders->collect(order | order.items)->flatten()
enumeration_select = top_orders->select(order | order.total > 1000)->collect(order | order.items)->flatten()

product = top_orders->collect(order | gold_customers->select(gold_customer | order.customer = gold_customer and order.total > 1000)->collect(order.customer.name)->flatten())->flatten()

