
@abstraction TYPE: MODEL_ELEMENT
{
    error_message: STRING?;

    /cardinality: STRING? = none;
    /concept: CONCEPT? = none;
    /element_type: TYPE = self;

    /kind = if empty(cardinality) then "required"
            else if cardinality == "?" then "optional"
            else if cardinality == "*" then "sequence"
            else "unknown";

    /matching_result_type = self;
    /base_type = self;

    /parameter = defined and not primitive and empty(concept);
    /defined = not undefined;
    /undefined = false;
    /something = defined and not nothing;
    /nothing = false;

    /relational = string or numeric or binary_floating_point;
    /referential = present(concept) and not sequence;

    /primitive = false;
    /numeric = false;
    /binary_floating_point = false;

    /boolean = false;
    /string = false;

    /single = (required or optional) and not sequence;
    /required = kind == "required";
    /optional = kind == "optional";
    /sequence = kind == "sequence";

    /inferred_cardinality = if empty(cardinality) or (optional and boolean) then none else cardinality;
    /inferred_type: TYPE = self;
}

@abstraction NAMED_TYPE: TYPE, NAMED_ELEMENT;

@concept UNDEFINED_TYPE: NAMED_TYPE
{
    /name = "UNDEFINED";
    /undefined = true;
    /parent: SCOPE? = none;
    /location: LOCATION? = none;
}